<%= semantic_form_for @picture, :html => {:multipart => true} do |f| %>
  <%= f.input :name %>
  <%= f.input :avatar, :as => :uploader %>
  <%= submit_tag %>
<% end %>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>

  window.file_upload_cache = window.file_upload_cache || {};
  window.file_upload_cache.initialize = function() {

    $.each($('.cached_file'), function(index, element) {
      var id = '#' + element.id,
      $id = $(id),
      $cache = $(id + "_cache"),
      $replace = $(id + '_replace'),
      $existing = $(id + "_existing");

      if($cache.val()){
        $(id).hide();
      }
      $($replace).click(function() {
        $($id).show();
        $($existing).hide();
        $($cache).val(null);
      });
    });
  }

  $(function() {
    window.file_upload_cache.initialize();
  });
  
</script>
